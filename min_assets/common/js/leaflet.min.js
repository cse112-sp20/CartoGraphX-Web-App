var map=L.map("mapid",{crs:L.CRS.Simple,minZoom:-1,preferCanvas:!0}),absoluteBoundX=1280,absoluteBoundY=720;let padding=150;var boundX=absoluteBoundX-150,boundY=absoluteBoundY-150,bounds=[[0,0],[absoluteBoundY,absoluteBoundX]],usedPoints=[],circleRadius=35,seed=3,avatarIcon=L.icon({iconUrl:"img/avatar.png",fillOpacity:.2,iconSize:[50,50],iconAnchor:[25,60]});map.setMaxBounds(bounds),map.fitBounds(bounds);function filesToMap(a){for(let b of a)L.circle(genNextPoint(),{color:"#8A2BE2",fillOpacity:.5,radius:35}).addTo(map).bindPopup(b.toString()).bindTooltip(b.toString(),{permanent:!0,direction:"center"}).openTooltip()}function activeFilesToMap(a){for(let[b,c]of Object.entries(a)){let a=genNextPoint();0<listEditorsOf(b).length&&L.marker(a,{icon:avatarIcon}).addTo(map),L.circle(a,{color:"#00FF7F",fillOpacity:.5,radius:35}).addTo(map).bindPopup("Editors: "+listEditorsOf(b)).bindTooltip(c.toString()+"\n"+listEditorsOf(b),{permanent:!0,direction:"center"}).openTooltip()}}function genNextPoint(){var a=Math.abs,b=[random()*boundY+75,random()*boundX+75];for(let c=0;c<usedPoints.length;c++)if(a(b[0]-usedPoints[c][0])<2*circleRadius+2&&a(b[1]-usedPoints[c][1])<2*circleRadius+2){var b=[random()*boundY+75,random()*boundX+75];c=0}return usedPoints.push(b),b}function random(){var a=1e4*Math.sin(seed++);return a-Math.floor(a)}addListener(onTreeUpdate);function onTreeUpdate(a,b){activeFilesToMap(b)}